import{r as i,u as D,j as a,a as s,_ as u,o as f,b as N,M as S}from"./index-25af1a79.js";function y(e){var h,b,o,c;const[C,x]=i.useState(""),n=D(),m=async r=>{var d;try{let t=localStorage.getItem("token"),l=f(t);(await N({method:"patch",url:"/editVehicle",data:{action:"Disable",vehicleId:r}})).data.message=="sucess"?e.setReload(!e.reload):x("Please re-try after some time")}catch(t){e.setLoading(!1),console.log(t.response),((d=t.response)==null?void 0:d.status)==401&&(localStorage.clear(),n("/user/login"))}},g=async(r,d)=>{var t;try{let l=localStorage.getItem("token"),k=f(l);(await N({method:"delete",url:"/editVehicle",data:{vehicleId:r,userId:d}})).data.message=="sucess"?e.setReload(!e.reload):x("Please re-try after some time")}catch(l){e.setLoading(!1),console.log(l.response),((t=l.response)==null?void 0:t.status)==401&&(localStorage.clear(),n("/user/login"))}},w=(r,d)=>{u(t=>s("span",{children:["Are You Realy Want to Delete Car ? ",a("br",{}),s("div",{className:"flex justify-center gap-5 align-middle mt-3",children:[a("button",{className:"bg-green-500 w-20 h-10 rounded-lg text-white",onClick:()=>u.dismiss(t.id),children:"Dismiss"}),a("button",{className:"bg-red-500 w-20 h-10 rounded-lg text-white",onClick:()=>{g(r,d),u.dismiss(t.id)},children:"Delete"})]})]}))},v=r=>{u(d=>s("span",{children:["Are You Realy Want to Disable Car ? ",a("br",{}),s("div",{className:"flex justify-center gap-5 align-middle mt-3",children:[a("button",{className:"bg-green-500 w-20 h-10 rounded-lg text-white",onClick:()=>u.dismiss(d.id),children:"Dismiss"}),a("button",{className:"bg-red-500 w-20 h-10 rounded-lg text-white",onClick:()=>{m(r),u.dismiss(d.id)},children:"Disable"})]})]}))};return a("div",{className:"px-10 mt-5",children:a("div",{className:" w-full h-full border-2 rounded-3xl border-neutral-100 shadow-2xl p-6 bg-slate-100",children:s("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4    w-full h-full  rounded-3xl",children:[a("div",{className:"bg-red-200 rounded-3xl my-auto w-[300px] h-[170px] shadow-xl  ",children:a("img",{className:" object-fill  w-[300px] h-[170px] rounded-3xl",src:(b=(h=e.data)==null?void 0:h.images[0])==null?void 0:b.image_url})}),s("div",{className:"bg-slate-100 rounded-xl ps-5 shadow-xl ",children:[s("h1",{className:"mt-5 font-bold",children:[e.data.carMake," ",e.data.carModel]}),a("p",{className:"mt-2",children:e.data.carNumber}),s("p",{className:"mt-3",children:["Car Status:",e.data.carStatus]}),a("p",{className:"mt-3",children:"Available Dates:"}),s("p",{className:"mt-1 text-right",children:[" ",(o=e.data.availableDates[0])==null?void 0:o.startDate,"  to  ",(c=e.data.availableDates[0])==null?void 0:c.endDate]}),s("p",{className:"mt-2",children:["Rs.",e.data.rentingPrice,"/day"]})]}),s("div",{className:"bg-slate-100 rounded-xl flex flex-col gap-3  p-4 shadow-xl ",children:[a("button",{onClick:()=>{n(`/user/editVehicle/${e.data._id}`)},className:"shadow-xl border-2 p-2  border-neutral-300 rounded-3xl hover:bg-slate-400 active:bg-slate-600 w-3/4 mx-auto",children:"Edit Car Details"}),e.data.carStatus=="Disabled"?null:a("button",{onClick:()=>{e.carId(e.data._id),e.modal(!0)},className:" shadow-xl border-2 p-2  border-neutral-300 rounded-3xl hover:bg-slate-400 active:bg-slate-600 w-3/4 mx-auto",children:"Change Active Days"}),e.data.bookedDates.length==0?a("button",{onClick:()=>{w(e.data._id,e.data.userId)},className:"shadow-xl border-2 p-2  border-neutral-300 rounded-3xl hover:bg-slate-400 active:bg-slate-600 w-3/4 mx-auto",children:"Delete Car"}):e.data.carStatus=="Disabled"?null:a("button",{onClick:()=>{v(e.data._id)},className:"shadow-xl border-2 p-2  border-neutral-300 rounded-3xl hover:bg-slate-400 active:bg-slate-600 w-3/4 mx-auto",children:"Disable Car"})]}),a("div",{className:"bg-slate-100 rounded-xl flex flex-col gap-3  p-4 shadow-xl ",children:a("button",{onClick:()=>{n(`/user/showBookings/${e.data._id}`)},className:"shadow-xl border-2 p-2  border-neutral-300 rounded-3xl hover:bg-slate-400 active:bg-slate-600 w-3/4 mx-auto",children:"Show Bookings"})})]})})})}function _(){const[e,C]=i.useState([]),[x,n]=i.useState(""),[m,g]=i.useState(!1),[w,v]=i.useState(""),[h,b]=i.useState(!1),o=D();let c;i.useEffect(()=>{let t=localStorage.getItem("token");if(!t)return o("/user/login");c=f(t).userId,r(c)},[m,h]);const r=async t=>{try{let l=await N({method:"get",url:"/hostVehicle",params:{userId:t}});l.data.message=="sucess"?C(k=>[...l.data.result]):n("Please re-try after some time")}catch(l){console.log(l),l.response.status==401&&(localStorage.clear(),o("/user/login"))}},d=()=>{g(!1)};return s("div",{className:"mb-10",children:[s("div",{className:"flex justify-between mb-4 px-10 pt-10",children:[a("h1",{className:"text-4xl mb-4 font-medium",children:"My Cars"}),s("div",{className:"",children:[a("button",{onClick:()=>o("/user/showBookings/All"),className:"bg-green-600 p-2 text-white me-9 text-2xl shadow-2xl rounded-md w-48 active:bg-slate-800 hover:bg-green-800",children:"Show Booking"}),a("button",{onClick:()=>o("/user/addVehicle"),className:"bg-green-600 p-2 text-white me-9 text-2xl shadow-2xl rounded-md w-48 active:bg-slate-800 hover:bg-green-800",children:"Start Earning"})]})]}),e.map((t,l)=>(console.log(t),a(y,{data:t,modal:g,carId:v,setReload:b,reload:h},l))),a(S,{visible:m,carId:w,modalClose:d,userId:c,getCarDetails:r})]})}export{_ as default};
